<div class="budgets">
  <div class="budgets__header">
    <h1 class="budgets__title">{{ 'budgets.title' | translate }}</h1>
    <app-reusable-button
      [text]="'budgets.addNewBudget' | translate"
      [variant]="'primary'"
      [size]="'medium'"
      (click)="openAddBudgetModal()">
    </app-reusable-button>
  </div>

  <div class="budgets__content">
    <div class="budgets__chart-section">
      <div class="budgets__chart-container">
        <app-donut-chart></app-donut-chart>
      </div>
      <div class="budgets__chart-info">
        <h3 class="budgets__chart-title">{{ 'budgets.spendingSummary' | translate }}</h3>
        <p class="budgets__chart-description">
          {{ 'budgets.spendingDescription' | translate }}
        </p>
      </div>
    </div>

    <div class="budgets__list-section">
      <h2 class="budgets__list-title">{{ 'budgets.budgetCategories' | translate }}</h2>

      @if (budgets().length === 0) {
        <div class="budgets__empty-state">
          <p class="budgets__empty-text">{{ 'budgets.emptyState.noBudgets' | translate }}</p>
          <p class="budgets__empty-subtext">{{ 'budgets.emptyState.startCreating' | translate }}</p>
          <app-reusable-button
            [text]="'budgets.emptyState.createBudget' | translate"
            [variant]="'primary'"
            [size]="'medium'"
            (click)="openAddBudgetModal()">
          </app-reusable-button>
        </div>
      } @else {
        <div class="budgets__list">
          @for (budget of budgets(); track budget.id) {
            <app-budget-item
              [budget]="budget"
              [currency]="currency()"
              (edit)="onBudgetEdit(budget)"
              (delete)="onBudgetDelete(budget.id!)">
            </app-budget-item>
          }
        </div>
      }
    </div>
  </div>

  <app-budget-modal
    [isOpen]="isBudgetModalOpen()"
    [budget]="selectedBudget()"
    [currency]="currency()"
    (close)="closeBudgetModal()"
    (success)="onBudgetSuccess()">
  </app-budget-modal>

  <app-delete-confirmation-modal
    [isOpen]="isDeleteModalOpen()"
    [itemName]="budgetToDelete()?.category || ''"
    [itemType]="'budget'"
    (close)="closeDeleteModal()"
    (confirm)="confirmDelete()">
  </app-delete-confirmation-modal>
</div>
