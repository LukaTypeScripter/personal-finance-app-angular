@let registerFormGroup = registerForm;

<app-auth-card [title]="'auth.register.title' | translate">
  <form ngProjectAs="[body]" class="auth-register" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <div class="auth-register__fields">
      <app-reusable-input
        formControlName="name"
        [label]="'auth.register.name' | translate"
        [placeholder]="''"
        [errorMessage]="[{
          message:('auth.validation.required' | translate),
          isVisible:validateFormControl(registerFormGroup,'name','required')
        },
        {
          message:('auth.validation.nameMinLength' | translate:{length: registerFormGroup.get('name')?.errors?.['minlength']?.requiredLength}),
          isVisible:validateFormControl(registerFormGroup,'name','minlength')
        }]"
      />

      <app-reusable-input
        formControlName="email"
        [label]="'auth.register.email' | translate"
        [placeholder]="''"
        [errorMessage]="[{
          message:('auth.validation.required' | translate),
          isVisible:validateFormControl(registerFormGroup,'email','required')
        },
        {
          message:('auth.validation.emailFormat' | translate),
          isVisible:validateFormControl(registerFormGroup,'email','email')
        }]"
      />

      <app-reusable-input
        formControlName="password"
        [type]="'password'"
        [label]="'auth.register.password' | translate"
        [iconPosition]="'right'"
        [iconName]="'icon-show-password'"
        [placeholder]="''"
        [errorMessage]="[{
          message:('auth.validation.required' | translate),
          isVisible:validateFormControl(registerFormGroup,'password','required')
        },
        {
          message:('auth.validation.passwordMinLength' | translate:{length: registerFormGroup.get('password')?.errors?.['minlength']?.requiredLength}),
          isVisible:validateFormControl(registerFormGroup,'password','minlength')
        }]"
      />
      <app-reusable-input
        formControlName="repeatPassword"
        [type]="'password'"
        [label]="'auth.register.repeatPassword' | translate"
        [iconPosition]="'right'"
        [iconName]="'icon-show-password'"
        [placeholder]="''"
        [errorMessage]="[{
          message:('auth.validation.required' | translate),
          isVisible:validateFormControl(registerFormGroup,'repeatPassword','required')
        },
        {
          message:('auth.validation.passwordMinLength' | translate:{length: registerFormGroup.get('repeatPassword')?.errors?.['minlength']?.requiredLength}),
          isVisible:validateFormControl(registerFormGroup,'repeatPassword','minlength')
        },
        {
          message:('auth.validation.passwordMismatch' | translate),
          isVisible:validateFormControl(registerFormGroup,'repeatPassword','passwordMismatch',true)
        }]"
      />

      <app-reusable-select
        formControlName="currency"
        [label]="'auth.register.currency' | translate"
        [options]="currencyOptions"
        [errorMessage]="[{
          message:('auth.validation.required' | translate),
          isVisible:validateFormControl(registerFormGroup,'currency','required')
        }]"
      />

    </div>

    <app-reusable-button
      [text]="'auth.register.createAccount' | translate"
      [type]="'submit'"
      [variant]="'primary'"
      [fullWidth]="true"
      [loading]="isLoading()"
    />
  </form>
</app-auth-card>
