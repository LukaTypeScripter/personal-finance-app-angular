@let registerFormGroup = registerForm;

<app-auth-card [title]="'Sign up'">
  <form ngProjectAs="[body]" class="auth-register" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <div class="auth-register__fields">
      <app-reusable-input
        formControlName="name"
        [label]="'Name'"
        [placeholder]="''"
        [errorMessage]="[{
          message:'this field is required!',
          isVisible:validateFormControl(registerFormGroup,'name','required')
        },
        {
          message:`name must be at least ${registerFormGroup.get('name')?.errors?.['minlength']?.requiredLength} characters`,
          isVisible:validateFormControl(registerFormGroup,'name','minlength')
        }]"
      />

      <app-reusable-input
        formControlName="email"
        [label]="'Email'"
        [placeholder]="''"
        [errorMessage]="[{
          message:'this field is required!',
          isVisible:validateFormControl(registerFormGroup,'email','required')
        },
        {
          message:'incorrect email format!',
          isVisible:validateFormControl(registerFormGroup,'email','email')
        }]"
      />

      <app-reusable-input
        formControlName="password"
        [type]="'password'"
        [label]="'Password'"
        [iconPosition]="'right'"
        [iconName]="'icon-show-password'"
        [placeholder]="''"
        [errorMessage]="[{
          message:'this field is required!',
          isVisible:validateFormControl(registerFormGroup,'password','required')
        },
        {
          message:`password must be at least ${registerFormGroup.get('password')?.errors?.['minlength']?.requiredLength} characters`,
          isVisible:validateFormControl(registerFormGroup,'password','minlength')
        }]"
      />
      <app-reusable-input
        formControlName="repeatPassword"
        [type]="'password'"
        [label]="'Repeat Password'"
        [iconPosition]="'right'"
        [iconName]="'icon-show-password'"
        [placeholder]="''"
        [errorMessage]="[{
          message:'this field is required!',
          isVisible:validateFormControl(registerFormGroup,'repeatPassword','required')
        },
        {
          message:`password must be at least ${registerFormGroup.get('repeatPassword')?.errors?.['minlength']?.requiredLength} characters`,
          isVisible:validateFormControl(registerFormGroup,'repeatPassword','minlength')
        },
        {
          message:'passwords do not match!',
          isVisible:validateFormControl(registerFormGroup,'repeatPassword','passwordMismatch',true)
        }]"
      />

    </div>

    <app-reusable-button
      [text]="'Create Account'"
      [type]="'submit'"
      [variant]="'primary'"
      [fullWidth]="true"
      [loading]="isLoading()"
    />
  </form>
</app-auth-card>
